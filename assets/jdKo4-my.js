import{H as f,K as y,L as h,B as P}from"#entry";import{u as l}from"./BO5GTlz1.js";const m="$s";function p(...o){const e=typeof o[o.length-1]=="string"?o.pop():void 0;typeof o[0]!="string"&&o.unshift(e);const[s,a]=o;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(a!==void 0&&typeof a!="function")throw new Error("[nuxt] [useState] init must be a function: "+a);const c=m+s,r=f(),i=y(r.payload.state,c);if(i.value===void 0&&a){const n=a();if(h(n))return r.payload.state[c]=n,n;i.value=n}return i}const w=()=>{const o=P(),e=p("post",()=>[]),s=p("post",()=>({id:"",title:"",body:""}));return{getPosts:async()=>{const t=await l("http://localhost:3001/posts","$q98k9r0sKP");return e.value=t.data.value??[],e},getPost:async()=>{const t=await l(`http://localhost:3001/posts/${o.params.id}`,"$oFaJVc3i1f");return s.value=t.data.value??{id:"",title:"",body:""},s},createPost:async t=>{const u=await $fetch("http://localhost:3001/posts",{method:"POST",body:t});console.log(u,"createPost"),Object.assign(t,{title:"",body:""})},updatePost:async()=>{const t=await $fetch(`http://localhost:3001/posts/${o.params.id}`,{method:"PATCH",body:s.value});console.log(t,"update")},deletePost:async t=>{if(!t.id){console.error("Post ID is missing");return}const u=await $fetch(`http://localhost:3001/posts/${t.id}`,{method:"DELETE"});e.value=e.value.filter(d=>d!==t),console.log(u,"DELETE")}}};export{w as u};

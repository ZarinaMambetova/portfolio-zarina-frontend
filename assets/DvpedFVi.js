import{i as c,C as P,c as l,a as e,d as r,l as p,w as o,v as y,u,F as _,r as w,_ as E,o as a,b as i,t as g}from"#entry";import{u as L}from"./T7rvwAHf.js";const N={key:0},$={key:1},T={key:2},V=["onClick"],M=c({__name:"index",async setup(B){let d,f;const{data:k,refresh:v,pending:C,error:F,status:b,execute:x}=([d,f]=P(()=>L("http://localhost:3001/posts",{key:"posts"},"$CAs4NfaMT_")),d=await d,f(),d),D=async m=>{if(!m.id){console.error("Post ID is missing");return}const t=await $fetch(`http://localhost:3001/posts/${m.id}`,{method:"DELETE"});await v(),console.log(t,"DELETE")};return(m,t)=>{const s=E;return a(),l("div",null,[t[6]||(t[6]=e("h2",{class:"title"},"Практика UseFetch()",-1)),r(s,{to:"/"},{default:o(()=>[...t[1]||(t[1]=[i("Главная",-1)])]),_:1}),t[7]||(t[7]=e("br",null,null,-1)),r(s,{to:"/learning/useFetchPractic/keyCase"},{default:o(()=>[...t[2]||(t[2]=[i("Cache",-1)])]),_:1}),t[8]||(t[8]=e("br",null,null,-1)),r(s,{to:"/learning/useFetchPractic/useLazyFetch"},{default:o(()=>[...t[3]||(t[3]=[i("useLazyFetch",-1)])]),_:1}),t[9]||(t[9]=e("br",null,null,-1)),t[10]||(t[10]=e("br",null,null,-1)),e("button",{onClick:t[0]||(t[0]=y(n=>u(x)(),["prevent"]))},"Обновить"),t[11]||(t[11]=e("br",null,null,-1)),t[12]||(t[12]=e("br",null,null,-1)),r(s,{to:{name:"learning-useFetchPractic-createPost"}},{default:o(()=>[...t[4]||(t[4]=[i("Создать запись",-1)])]),_:1}),u(C)?(a(),l("div",N,"Загрузка...")):p("",!0),u(F)?(a(),l("div",$,"Произошла ошибка загрузки. Пожалуйста, повторите позже.")):p("",!0),u(b)==="success"?(a(),l("div",T,[(a(!0),l(_,null,w(u(k),n=>(a(),l("div",null,[e("h3",null,[r(s,{to:{name:"learning-useFetchPractic-id",params:{id:n.id},query:{title:n.title}}},{default:o(()=>[i(g(n.title),1)]),_:2},1032,["to"])]),e("p",null,g(n.body),1),r(s,{to:{name:"learning-useFetchPractic-id-edit",params:{id:n.id}}},{default:o(()=>[...t[5]||(t[5]=[i("Редактировать",-1)])]),_:1},8,["to"]),e("div",null,[e("button",{onClick:y(h=>D(n),["prevent"])},"Удалить",8,V)])]))),256))])):p("",!0)])}}});export{M as default};
